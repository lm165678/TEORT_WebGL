<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>InputTest</title>
</head>
<body>
    <canvas id="canvas" width="500px" height="500px" style="background-color: aliceblue" tabindex="0"></canvas>
    <script type="module">
        import Geometry from "../src/Core/Node/Geometry.js";
        import Scene from "../src/Core/Scene/Scene.js";
        import RenderEngine from "../src/Core/RenderEngine.js";
        import Node from "../src/Core/Node/Node.js";
        import Mesh from "../src/Core/WebGL/Mesh.js";
        import Material from "../src/Core/Material/Material.js";
        import GuiMatDef from "../src/Core/Assets/MaterialDef/GuiMatDef.js";
        import Input from "../src/Core/InputControl/Input.js";
        let scene = new Scene({cavnas:document.getElementById('canvas')});
        let input = new Input(scene, {id:'testInput'});
        input.on('keydown', (key)=>{
            if(key == Input.S_KEY_W){
                console.log("按下了W");
            }
        });
        input.on('keyup', (key)=>{
            if(key == Input.S_KEY_W){
                console.log("抬起了W");
            }
        });
        input.on('mousemove', (coords)=>{
            console.log("鼠标位置:" + coords[0] + "," + coords[1] + ";移动量:" + input.getAmountX() + "," + input.getAmountY());
        });
        input.on("mousewheel", (d)=>{
            console.log("滚动量:" + d);
        });
        let geometry = new Geometry(scene, {id:'testGeometry'});
        let mesh = new Mesh();
        mesh.setData(Mesh.S_POSITIONS, [
            -.5, .5, .5,
            -.5, -.5, .5,
            .5, .5, .5,
            .5, -.5, .5
        ]);
        mesh.setData(Mesh.S_INDICES, [
            0, 1, 2,
            1, 2, 3
        ]);
        let material = new Material(scene, {materialSourceDef:new GuiMatDef()});
        geometry.setMesh(mesh);
        geometry.updateBound();
        geometry.setMaterial(material);
        let rootNode = new Node(scene, {id:'rootNode'});
        rootNode.addChildren(geometry);
        let renderEngine = new RenderEngine();
        scene.addSceneNode(rootNode);
        renderEngine.addScene(scene);
        renderEngine.launch();
    </script>
</body>
</html>
